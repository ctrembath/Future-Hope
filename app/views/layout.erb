<!doctype html>
<html lang="en">
  <head>
    <title>Future Hope</title>
    <link rel="stylesheet" href="css/foundation.css" />
    <link rel="stylesheet" href="css/app.css" />
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,300' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Roboto:400,300|Love+Ya+Like+A+Sister' rel='stylesheet' type='text/css'>
    <script src="https://code.jquery.com/jquery-latest.min.js"
        type="text/javascript"></script>
  </head>
  <body>
  	<%= yield %>
	<script src="js/foundation.js"></script>
  <script src="js/script.js"></script>
  <script>
    var append_li = function(string) {
      $('#messages').append($('<li>').text(string));
    }

    var ws_uri = location.href.replace(/^http/, 'ws');
    var ws = new WebSocket(ws_uri);

    ws.open = function() {
      append_li('ws.open');
    }

    ws.onmessage = function(msg) {
      append_li('ws.onmessage: "' + msg.data + '" from server');
    }

    ws.onclose = function() {
      append_li('ws.onclose');
    }

    var input = $('#input')
    input.change(function() {
      var msg = input.val();
      ws.send(msg);
      append_li('"' + msg + '" to server');
      input.val("");
    });
    
    console.log(input);
  </script>
  </body>
</html>